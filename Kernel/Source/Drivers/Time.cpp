////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#ifndef _TIME_C_
#define _TIME_C_
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/*
    System timer
*/
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

#include "../Lib/STDLib.H"

#include "System.H"
#include "Time.H"

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

char days[8][10] = {
    "Sunday",
    "Monday",
    "Tuesday",
    "Wednesday",
    "Thursday",
    "Friday",
    "Saturday"
};

char months[13][10] = {
    "Janurary",
    "February",
    "March",
    "April",
    "May",
    "June",
    "July",
    "August",
    "September",
    "October",
    "November",
    "December"
};

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

void GetTime(SystemTime *time)
{
    time -> Second = CMOSRead(SECOND);
    time -> Minute = CMOSRead(MINUTE);
    time -> Hour   = CMOSRead(HOUR);
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

void GetDate(SystemDate *date)
{
    date -> Year  = CMOSRead(YEAR) + 2000;
    date -> Month = CMOSRead(MONTH);
    date -> Date  = CMOSRead(DATE);
    date -> Day   = CMOSRead(DAY);
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

void PrintTime(void)
{
    SystemTime ST;

    GetTime(&ST);

    if(ST.Hour < 10) printf("0");
	if((ST.Hour % 12) == 0)
    {
		printf("%d", 12);
    }
	else{
        printf("%d", ST.Hour % 12);
     }
    printf(":");

    if(ST.Minute < 10)
    {
        printf("0");
    }
    printf("%d", ST.Minute);
    printf(":");

    if(ST.Second < 10)
    {
        printf("0");
    }
    printf("%d", ST.Second);

	if (ST.Hour >= 12)
    {
		printf(" PM ");
    }
	else printf(" AM ");
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

void PrintDate(void)
{
	SystemDate date;

	GetDate(&date);

	printf("%s, %s %d, %d",
        days[date.Day],
        months[date.Month - 1],
        date.Date, date.Year);
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
#endif
